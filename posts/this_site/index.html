<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>This site :: Ed Rousseau</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Introduction So, you want to start your own blog. You could use an existing service, such as Wordpress (the service, not the software) or Medium. I have to admit that I don&amp;rsquo;t know much about the ups and downs of such services, because I decided straight off the bat to take a more DIY approach. I wanted to write my posts in a code editor instead of a WYSIWYG editor, I wanted the site to be simple &amp;amp; fast &amp;amp; reliable, and I wanted it to be free or close to it." />
<meta name="keywords" content="hugo, github, pages, cloudflare" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://ed.rousseau.id.au/posts/this_site/" />


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'G-MVFCTQPG38', 'auto');
	
	ga('send', 'pageview');
}
</script>



<link rel="stylesheet" href="https://ed.rousseau.id.au/assets/style.css">

  <link rel="stylesheet" href="https://ed.rousseau.id.au/assets/green.css">






<link rel="apple-touch-icon" href="https://ed.rousseau.id.au/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="https://ed.rousseau.id.au/img/favicon/green.png">



<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:creator" content="Ed Rousseau" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="This site">
<meta property="og:description" content="How this site is generated and hosted." />
<meta property="og:url" content="https://ed.rousseau.id.au/posts/this_site/" />
<meta property="og:site_name" content="Ed Rousseau" />

  
    <meta property="og:image" content="https://ed.rousseau.id.au/img/favicon/green.png">
  

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2020-11-14 15:01:35 &#43;1100 AEDT" />












</head>
<body class="green">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Ed Rousseau
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/posts/about">About Me</a></li>
        
      
        
          <li><a href="https://github.com/ecrousseau">GitHub</a></li>
        
      
        
          <li><a href="https://www.linkedin.com/in/edwardrousseau/">Linked In</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/posts/about">About Me</a></li>
      
    
      
        <li><a href="https://github.com/ecrousseau">GitHub</a></li>
      
    
      
        <li><a href="https://www.linkedin.com/in/edwardrousseau/">Linked In</a></li>
      
    
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://ed.rousseau.id.au/posts/this_site/">This site</a></h1>
  <div class="post-meta">
    
      <span class="post-date">
        2020-11-14 
      </span>
    
    
    <span class="post-author">:: Ed Rousseau</span>
    
  </div>

  
  <span class="post-tags">
    
    #<a href="https://ed.rousseau.id.au/tags/hugo/">hugo</a>&nbsp;
    
    #<a href="https://ed.rousseau.id.au/tags/github/">github</a>&nbsp;
    
    #<a href="https://ed.rousseau.id.au/tags/cloudflare/">cloudflare</a>&nbsp;
    
  </span>
  

  

  

  <div class="post-content"><div>
        <h1 id="introduction">Introduction<a href="#introduction" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>So, you want to start your own blog. You could use an existing service, such as Wordpress (the service, not the software) or Medium. I have to admit that I don&rsquo;t know much about the ups and downs of such services, because I decided straight off the bat to take a more DIY approach. I wanted to write my posts in a code editor instead of a WYSIWYG editor, I wanted the site to be simple &amp; fast &amp; reliable, and I wanted it to be free or close to it. These requirements are pretty basic, so I had a whole world of options. What was the right choice for me?</p>
<p><em>If you just want to know what I ended up doing: skip to <a href="#hugo">Hugo</a> below.</em></p>
<h1 id="the-right-approach">The Right Approach<a href="#the-right-approach" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>Lets start with the options I ruled out as too hard:</p>
<ul>
<li>Getting out my copy of <em>The C Programming Language</em>, loading up <a href="https://tools.ietf.org/html/rfc2616">RFC2616</a> in a new tab, and firing up the C compiler</li>
<li>Inventing a new universe and proceeding from there</li>
</ul>
<p><img src="/images/c_programming_language.jpg" alt="The C Programming Language, Second Edition"></p>
<p>Both these approaches would take approximately the same amount of time, and seem like far too much work to me. You certainly <em>can</em> write a web server in C, but lets just say that I&rsquo;m glad I don&rsquo;t have to. I don&rsquo;t even want to write one in Go. In short: I don&rsquo;t want to start from scratch. I want to stand on the shoulders of giants.</p>
<h1 id="select-a-giant">Select a Giant<a href="#select-a-giant" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>But which giants? On their face, technologies like React and Node.js and MongoDB, or concepts like content management systems and single-page apps, are great. They allow web developers to build some amazing things. So, for that matter, do slightly less bleeding-edge technologies like nginx, PHP, and MySQL. But with that richness of features and limitless flexbility comes a price: complexity. It takes effort to understand these technologies. It takes effort to implement them, and it takes even more effort to implement them correctly! Even if you go up a level and use an existing framework built on top of these technologies - for example Wordpress, which is built on top of PHP and MySQL - you&rsquo;re still on the hook for setting up the underlying stack.</p>
<p>To host a site based on Wordpress and meet my reliability target, I&rsquo;d need to think about:</p>
<ul>
<li>Domain registration and DNS hosting</li>
<li>CDN/WAF/load balancer</li>
<li>Front-end VMs acting as web servers</li>
<li>Back-end VMs acting as database servers</li>
</ul>
<p>I can draw an architecture diagram for that in my sleep, but thats not the point - there&rsquo;s still a lot of layers to configure and maintain. Of course, you can pay someone else to worry about some of the details: you could replace the database servers with a managed service like Amazon RDS, and avoid thinking about database replication and how to create and restore backups and so on. You could replace the web servers with a managed service like Azure App Service and stop worrying about worker pools and operating system patching and load balancing. But those aren&rsquo;t free services; they make a ton of sense for business-critical applications where the cost of getting it wrong is high, but they are a bit too &ldquo;big iron&rdquo; for my extremely small website.</p>
<p>And even leaving aside the issues with complexity and cost, I just don&rsquo;t need the vast majority of the features that such an approach provides. I only need to be able to write some text and have it show up in your web browser, with bonus points awarded if that happens quickly and it looks nice. If you&rsquo;ll allow me to be reductive for a moment: at its core, a content management system takes a bunch of code and data and transforms it into a HTML document. Since there&rsquo;s nothing I want to do that has to be done on the fly, why not generate that HTML ahead of time? Then we don&rsquo;t need a database at all. We also don&rsquo;t need a customisable compute layer - we just need a really basic web server that can serve files. But before we get into how to serve the content, lets worry about how we&rsquo;re going to generate it.</p>
<h1 id="hugo">Hugo<a href="#hugo" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>There are many ways to generate a static HTML page. You can even do it using Microsoft Word (I think? Is &ldquo;save as web page&rdquo; still a thing?). Anyway, don&rsquo;t do that. Use something like <a href="https://gohugo.io/">Hugo</a>. It will transform your scribblings into nice modern HTML/CSS. It can even add integration with Google Analytics and Twitter and so on, if you&rsquo;re keen.</p>
<p>To get started, you&rsquo;ll need to grab the hugo binary. The Hugo quickstart tutorial recommends using a package manager, but I found it easier to download the hugo binary from the <a href="https://github.com/gohugoio/hugo/releases">releases page</a>. Just unzip and add it to your path!</p>
<p>To create the basic folder layout for a new website, open up your favourite command line and run:</p>
<pre><code>hugo new site mysite
cd mysite
</code></pre><p><em>From here, assume that we&rsquo;re running all the commands in your &lsquo;mysite&rsquo; directory.</em></p>
<p>I&rsquo;d recommend making the folder a git repo for version control - this isn&rsquo;t strictly necessary, but its generally a good idea.</p>
<pre><code>git init .
echo &quot;public/**&quot; &gt; .gitignore
</code></pre><p>Now you can add your theme as a submodule. I selected the Terminal theme:</p>
<pre><code>git submodule add https://github.com/panr/hugo-theme-terminal.git themes/terminal
</code></pre><p>Writing a post for your site is now as simple as creating a Markdown file. Hugo will even help you do that:</p>
<pre><code>hugo new posts/myfirstpost.md
</code></pre><p>To see what your site is going to look like, run <code>hugo server -D</code> and then point your favourite browser at <code>http://localhost:1313/</code>.</p>
<pre><code>&gt; hugo server -D
Start building sites …

                   | EN
-------------------+-----
  Pages            | 25
  Paginator pages  |  0
  Non-page files   |  0
  Static files     | 26
  Processed images |  0
  Aliases          |  8
  Sitemaps         |  1
  Cleaned          |  0

Built in 29 ms
Watching for changes in C:\Users\Edward\src\ed.rousseau.id.au-private\{archetypes,content,static,themes}
Watching for config changes in C:\Users\Edward\src\ed.rousseau.id.au-private\config.yaml
Environment: &quot;development&quot;
Serving pages from memory
Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender
Web Server is available at http://localhost:1313/ (bind address 127.0.0.1)
Press Ctrl+C to stop
</code></pre><p><img src="/images/hugo_preview.png" alt="Hugo preview"></p>
<p>The -D tells hugo to include draft content.</p>
<p>When you&rsquo;re happy, you can &ldquo;build&rdquo; your site by just running <code>hugo</code>. That should result in output along the lines of:</p>
<pre><code>&gt; hugo
Start building sites …

                   | EN
-------------------+-----
  Pages            | 12
  Paginator pages  |  0
  Non-page files   |  0
  Static files     | 15
  Processed images |  0
  Aliases          |  2
  Sitemaps         |  1
  Cleaned          |  0

Total in 65 ms
</code></pre><h1 id="github-pages">GitHub Pages<a href="#github-pages" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>At this point, we&rsquo;ve got some static HTML (and we didn&rsquo;t have to learn HTML, CSS, or javascript) but nobody else can see it. There are many options for hosting static HTML. In the past I&rsquo;ve used AWS S3&rsquo;s static website hosting option, fronted by Cloudflare&rsquo;s CDN to add support for HTTPS. Hugo even has built-in support for this approach using the <code>hugo publish</code> command.</p>
<p>But this time, I decided to try something else, and use GitHub pages. To do this, you&rsquo;ll need to create a public GitHub repository, push your static HTML content, and configure GitHub to serve them for you.</p>
<p>First, create the repository:
<img src="/images/github_create_repo.png" alt="Create a GitHub repository"></p>
<p>Then, generate, commit, and push your content:</p>
<pre><code>hugo
cd mysite/public
git init .
git add .
git commit -m 'initial version'
git remote add origin https://github.com/ecrousseau/mysite.git
git push -u
</code></pre><p>Finally, configure GitHub Pages in your repository&rsquo;s settings:
<img src="/images/github_pages_settings.png" alt="GitHub repository settings"></p>
<p>I used my own domain for this site, but you could stick to the built-in <code>github.io</code> domain if you like. The important part is to make sure the branch and the path are set correctly - your branch is most likely called <code>master</code> and the path should be set to <code>/ (root)</code>. Note that if you&rsquo;re visiting from far enough in the future, the git commandline tool might have named your branch <code>main</code> instead.</p>
<p>A quick aside - if you&rsquo;re using a custom domain, you need a DNS entry and a CNAME file. I use CloudFlare for DNS, so I created an entry like this:
<img src="/images/cloudflare_dns.png" alt="CloudFlare DNS"></p>
<p>Then you need a CNAME file - a text file containing your site&rsquo;s domain name, so GitHub knows what to listen for. GitHub will actually add that to your repo automatically, but we need to make sure Hugo doesn&rsquo;t delete it again. Do this by adding it to the <code>static</code> folder in your folder structure:</p>
<pre><code>echo &quot;my.domain.com&quot; &gt; static/CNAME
</code></pre><p>You might also need to adjust the base URL in <code>mysite/config.toml</code>. Mine is <code>https://ed.rousseau.id.au/</code> but yours will be different. If you&rsquo;re using the GitHub-provided domain, it&rsquo;ll look similar to <code>https://ecrousseau.github.io/mysite/</code>.</p>
<p>At this point, GitHub should take care of serving up your static HTML content to visitors&hellip; and if you&rsquo;re reading this, its working! You can check out the underlying HTML by viewing the repository in GitHub: <a href="https://github.com/ecrousseau/ed.rousseau.id.au">https://github.com/ecrousseau/ed.rousseau.id.au</a>.</p>
<p>GitHub is taking care of load balancing, compute, storage, networking, the whole works. They&rsquo;re even paying the electricity bill (thanks GitHub!). This leaves me with the job of worrying about the domain registration and DNS hosting - which I&rsquo;ve farmed out to CloudFlare, so no worries there either - and actually writing posts. Sadly I still have to do that myself&hellip;</p>

      </div></div>

  
  
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">Read other posts</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        
        
        <span class="button next">
            <a href="https://ed.rousseau.id.au/posts/about/">
                <span class="button__text">About</span>
                <span class="button__icon">→</span>
            </a>
        </span>
        
    </div>
</div>

  

  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2020 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="https://ed.rousseau.id.au/assets/main.js"></script>
<script src="https://ed.rousseau.id.au/assets/prism.js"></script>







  
</div>

</body>
</html>
